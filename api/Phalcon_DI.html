<!DOCTYPE html>

<html lang="en">
<head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Class Phalcon\DI &mdash; Phalcon7 1.0.0 文档</title>
    <meta name="keywords" content="php, phalcon, phalcon7, phalcon php, php framework, faster php framework">
    <link rel="stylesheet" type="text/css" href="../static/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../static/phalcon.css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <script src="../static/jquery.min.js"></script>
    <link rel="shortcut icon" href="../static/img/favicon.ico"/>
    <link rel="index" title="索引" href="../index.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="top" title="Phalcon7 1.0.0 文档" href="../index.html" /> 
</head>
<body>

<header class="page-header">
<nav class="navbar" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-container">
				<span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
			</button>
			<a class="navbar-brand phalcon-logo" href="/"><span itemprop="name" class="sr-only">Phalcon PHP</span></a>
		</div>

		<div class="collapse navbar-collapse navbar-right" id="main-menu-container">
			<ul class="nav navbar-nav main-menu">
			  <li class="first"><a href="https://github.com/dreamsxin/cphalcon7" class="header-nav-link">GitHub</a></li>
			  <li class="first"><a href="https://github.com/dreamsxin/cphalcon7/releases" class="header-nav-link">Download</a></li>
			  <li class="first"><a href="/api/" class="header-nav-link">API</a></li>
			</ul>
		</div>
	</div>
</nav>
</header>

<div class="heading">
    <div class="container">
        <div class="row">
            <h2>Documentation</h2>
        </div>
    </div>
</div>


<div class="container-fluid">
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li><a href="http://myleftstudio.com">Home</a> &raquo;</li>
        <li><a href="../index.html">Phalcon7 1.0.0 文档</a> &raquo;</li> 
      </ul>
    </div>  
</div>

<div class="container-fluid">
	<div class="col-md-3 primary-box">
		<div class="panel panel-default">
			<div class="panel-heading"><a href="../index.html">內容目录</a></div>
			<div class="panel-body"><ul>
<li><a class="reference internal" href="#">Class <strong>Phalcon\DI</strong></a><ul>
<li><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
</ul>
</div>
		</div>
	</div>
  <div class="col-md-9 second-box" valign="top">
	<div class="document">
		<div class="documentwrapper">
		  <div class="bodywrapper">
			<div class="body" >
			  
  <div class="section" id="class-phalcon-di">
<h1>Class <strong>Phalcon\DI</strong><a class="headerlink" href="#class-phalcon-di" title="永久链接至标题">¶</a></h1>
<p><em>implements</em> <a class="reference internal" href="Phalcon_DIInterface.html"><span class="doc">Phalcon\DIInterface</span></a></p>
<p><span class="raw-html"><a href="https://github.com/dreamsxin/cphalcon7/blob/master/ext/di.c" class="btn btn-default btn-sm">Source on GitHub</a></span></p>
<p>Phalcon\DI is a component that implements Dependency Injection/Service Location of services and it&#8217;s itself a container for them.  Since Phalcon is highly decoupled, Phalcon\DI is essential to integrate the different components of the framework. The developer can also use this component to inject dependencies and manage global instances of the different classes used in the application.  Basically, this component implements the <cite>Inversion of Control</cite> pattern. Applying this, the objects do not receive their dependencies using setters or constructors, but requesting a service dependency injector. This reduces the overall complexity, since there is only one way to get the required dependencies within a component.  Additionally, this pattern increases testability in the code, thus making it less prone to errors.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

 <span class="nv">$di</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phalcon\DI</span><span class="p">();</span>

 <span class="c1">//Using a string definition</span>
 <span class="nv">$di</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">,</span> <span class="s1">&#39;Phalcon\Http\Request&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>

 <span class="c1">//Using an anonymous function</span>
 <span class="nv">$di</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(){</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">Phalcon\Http\Request</span><span class="p">();</span>
 <span class="p">},</span> <span class="k">true</span><span class="p">);</span>

 <span class="nv">$request</span> <span class="o">=</span> <span class="nv">$di</span><span class="o">-&gt;</span><span class="na">getRequest</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="永久链接至标题">¶</a></h2>
<p>public  <strong>__construct</strong> ([<em>unknown</em> $name])</p>
<p>Phalcon\DI constructor</p>
<p>public <em>String</em>  <strong>getName</strong> ()</p>
<p>Returns the name</p>
<p>protected  <strong>setEventsManager</strong> ()</p>
<p>Sets a custom events manager</p>
<p>protected <a class="reference internal" href="Phalcon_Events_ManagerInterface.html"><span class="doc">Phalcon\Events\ManagerInterface</span></a>  <strong>getEventsManager</strong> ()</p>
<p>Returns the custom events manager</p>
<p>public <a class="reference internal" href="Phalcon_DI_ServiceInterface.html"><span class="doc">Phalcon\DI\ServiceInterface</span></a>  <strong>set</strong> (<em>string</em> $name, <em>mixed</em> $definition, [<em>boolean</em> $shared])</p>
<p>Registers a service in the services container</p>
<p>public  <strong>remove</strong> (<em>string</em> $name)</p>
<p>Removes a service in the services container</p>
<p>public <a class="reference internal" href="Phalcon_DI_ServiceInterface.html"><span class="doc">Phalcon\DI\ServiceInterface</span></a>  <strong>setRaw</strong> (<em>string</em> $name, [<em>mixed</em> $definition], [<em>boolean</em> $shared])</p>
<p>Returns a service definition without resolving</p>
<p>public <em>mixed</em>  <strong>getRaw</strong> (<em>string</em> $name)</p>
<p>Returns a service definition without resolving</p>
<p>public <a class="reference internal" href="Phalcon_DI_ServiceInterface.html"><span class="doc">Phalcon\DI\ServiceInterface</span></a>  <strong>getService</strong> (<em>string</em> $name)</p>
<p>Returns a Phalcon\DI\Service instance</p>
<p>public <a class="reference internal" href="Phalcon_DI_ServiceInterface.html"><span class="doc">Phalcon\DI\ServiceInterface</span></a>  <strong>setService</strong> (<em>string</em> $name, <a class="reference internal" href="Phalcon_DI_ServiceInterface.html"><span class="doc">Phalcon\DI\ServiceInterface</span></a> $rawDefinition)</p>
<p>Sets a service using a raw Phalcon\DI\Service definition</p>
<p>public <em>mixed</em>  <strong>get</strong> (<em>string</em> $name, [<em>array</em> $parameters], [<em>boolean</em> $noError], [<em>unknown</em> $noerror])</p>
<p>Resolves the service based on its configuration</p>
<p>public <em>mixed</em>  <strong>getShared</strong> (<em>string</em> $name, [<em>array</em> $parameters], [<em>boolean</em> $noError])</p>
<p>Resolves a service, the resolved service is stored in the DI, subsequent requests for this service will return the same instance</p>
<p>public <em>boolean</em>  <strong>has</strong> (<em>string</em> $name)</p>
<p>Check whether the DI contains a service by a name</p>
<p>public <em>boolean</em>  <strong>wasFreshInstance</strong> ()</p>
<p>Check whether the last service obtained via getShared produced a fresh instance or an existing one</p>
<p>public <a class="reference internal" href="Phalcon_DI_Service.html"><span class="doc">Phalcon\DI\Service</span></a> [] <strong>getServices</strong> ()</p>
<p>Return the services registered in the DI</p>
<p>public static  <strong>setDefault</strong> (<a class="reference internal" href="Phalcon_DIInterface.html"><span class="doc">Phalcon\DIInterface</span></a> $dependencyInjector)</p>
<p>Set a default dependency injection container to be obtained into static methods</p>
<p>public static <a class="reference internal" href="Phalcon_DIInterface.html"><span class="doc">Phalcon\DIInterface</span></a>  <strong>getDefault</strong> ()</p>
<p>Return the lastest DI created</p>
<p>public static  <strong>reset</strong> ()</p>
<p>Resets the internal default DI</p>
<p>public <a class="reference internal" href="Phalcon_DI_ServiceInterface.html"><span class="doc">Phalcon\DI\ServiceInterface</span></a>  <strong>attempt</strong> (<em>string</em> $name, <em>mixed</em> $definition, [<em>boolean</em> $shared])</p>
<p>Attempts to register a service in the services container Only is successful if a service hasn&#8217;t been registered previously with the same name</p>
<p>public <a class="reference internal" href="Phalcon_DI_ServiceInterface.html"><span class="doc">Phalcon\DI\ServiceInterface</span></a>  <strong>setShared</strong> (<em>string</em> $name, <em>mixed</em> $definition)</p>
<p>Registers an &#8220;always shared&#8221; service in the services container</p>
<p>public <em>boolean</em>  <strong>offsetExists</strong> (<em>unknown</em> $property)</p>
<p>Check if a service is registered using the array syntax. Alias for Phalcon\Di::has()</p>
<p>public  <strong>offsetSet</strong> (<em>unknown</em> $property, <em>unknown</em> $value)</p>
<p>Allows to register a shared service using the array syntax. Alias for Phalcon\Di::setShared()</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$di</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phalcon\Http\Request</span><span class="p">();</span>
</pre></div>
</div>
<p>public <em>mixed</em>  <strong>offsetGet</strong> (<em>unknown</em> $property)</p>
<p>Allows to obtain a shared service using the array syntax. Alias for Phalcon\Di::getShared()</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$di</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>public  <strong>offsetUnset</strong> (<em>unknown</em> $property)</p>
<p>Removes a service from the services container using the array syntax. Alias for Phalcon\Di::remove()</p>
<p>public <em>mixed</em>  <strong>__call</strong> (<em>string</em> $method, [<em>array</em> $arguments])</p>
<p>Magic method to get or set services using setters/getters</p>
<p>public  <strong>__clone</strong> ()</p>
<p>...</p>
<p>public  <strong>__set</strong> (<em>unknown</em> $property, <em>unknown</em> $value)</p>
<p>...</p>
<p>public  <strong>__get</strong> (<em>unknown</em> $property)</p>
<p>...</p>
</div>
</div>


			</div>
		  </div>
		</div>
	</div>
  </div>
</div>
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="总目录"
             >索引</a></li> 
      </ul>
    </div>

<footer class="footer">
	<div class="container">
      <div class="row">
          <div class="col-xs-6 col-sm-3">
              <h4>Download</h4>
              <ul>
                  <li><a href="https://github.com/dreamsxin/cphalcon7/releases">安裝 Phalcon7</a></li>
              </ul>
          </div>
          <div class="col-xs-6 col-sm-3">
              <h4>Community</h4>
              <ul>
                  <li><a href="https://github.com/dreamsxin/cphalcon7">GitHub</a></li>
                  <li><a href="https://github.com/dreamsxin/cphalcon7/issues">Issue Tracker</a></li>
              </ul>
          </div>
          <div class="col-xs-6 col-sm-2">
              <h4>About</h4>
              <ul>
                  <li><a href="https://github.com/dreamsxin/cphalcon/wiki/%E6%8D%90%E8%B5%A0%EF%BC%88Donation%EF%BC%89">Donate</a></li>
              </ul>
          </div>
          <div id="license-spaccer" class="visible-xs"></div>
          <div id="license-wrapper" class="col-xs-12 col-sm-4">
              <p class="license">

                  Phalcon7 Framework is released under the <a href="https://github.com/dreamsxin/cphalcon7/blob/master/docs/LICENSE.md">new BSD license</a>.<br>
                  Except where otherwise noted, content on this site is licensed under the
                  <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License.</a>
              </p>
              <div class="design">
                  <span>Designed by:</span>

                  <a href="http://www.fog-city.net/" class="fogcity" target="_blank" title="Fog City Software"><span>Fog City Software</span></a>
              </div>
          </div>
      </div>
	</div>
</footer>
</body>
</html>